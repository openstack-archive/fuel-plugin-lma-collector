# <%= @service_name %>

description     "<%= @service_name %>"

start on runlevel [2345]
stop on runlevel [!2345]

respawn

<% unless @run_as_root -%>
pre-start script
    touch <%= @log_file %>
    chown <%= @heka_user %>:<%= @heka_user %> <%= @log_file %>
end script
<% end -%>

script
    ulimit -n 102400 # Set the limit for the maximum number of file descriptors
    exec<%= @run_as_root ? "" : "sudo -u #{ @heka_user }" %> <%= @hekad_wrapper %> 2>><%= @log_file %>
end script
